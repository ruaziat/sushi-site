<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–î–æ—Å—Ç–∞–≤–∫–∞ —Å—É—à–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #f7f7f7; padding-bottom: 80px; } /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∞ –∫–æ–Ω—Ç–µ–Ω—Ç */
        .card { border-radius: 20px; border: none; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn-circle { width: 32px; height: 32px; border-radius: 50%; padding: 0; line-height: 30px; font-weight: bold; }
        
        /* –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤–∏—Å–∏—Ç —Å–Ω–∏–∑—É –≤—Å–µ–≥–¥–∞ */
        #orderBtn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            width: calc(100% - 40px);
            display: none;
            z-index: 100;
            border-radius: 12px;
            padding: 15px;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(25, 135, 84, 0.4);
        }
    </style>
</head>
<body>
<div class="container py-4">
    <h2 class="text-center mb-4 fw-bold">üç£ –ú–µ–Ω—é</h2>

    <div id="productList" class="row g-3">
        <!-- –†–æ–ª–ª—ã -->
        <div class="col-12">
            <div class="card p-3">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1 fw-bold">–°–µ—Ç –§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è</h5>
                        <p class="text-muted mb-0 small">–õ–æ—Å–æ—Å—å, —Å—ã—Ä, –æ–≥—É—Ä–µ—Ü (800–≥)</p>
                        <div class="mt-2 fw-bold text-success">1200 ‚ÇΩ</div>
                    </div>
                    <div class="d-flex align-items-center bg-light rounded-pill p-1">
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('rolls', -1)">-</button>
                        <span id="count-rolls" class="mx-3 fw-bold">0</span>
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('rolls', 1)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–∏—Ü—Ü–∞ -->
        <div class="col-12">
            <div class="card p-3">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1 fw-bold">–ü–∏—Ü—Ü–∞ –ü–µ–ø–ø–µ—Ä–æ–Ω–∏</h5>
                        <p class="text-muted mb-0 small">–û—Å—Ç—Ä–∞—è –∫–æ–ª–±–∞—Å–∫–∞, —Å—ã—Ä</p>
                        <div class="mt-2 fw-bold text-success">650 ‚ÇΩ</div>
                    </div>
                    <div class="d-flex align-items-center bg-light rounded-pill p-1">
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('pizza', -1)">-</button>
                        <span id="count-pizza" class="mx-3 fw-bold">0</span>
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('pizza', 1)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ö–æ–ª–∞ -->
        <div class="col-12">
            <div class="card p-3">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1 fw-bold">Coca-Cola</h5>
                        <p class="text-muted mb-0 small">0.5 –ª, —Ö–æ–ª–æ–¥–Ω–∞—è</p>
                        <div class="mt-2 fw-bold text-success">100 ‚ÇΩ</div>
                    </div>
                    <div class="d-flex align-items-center bg-light rounded-pill p-1">
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('cola', -1)">-</button>
                        <span id="count-cola" class="mx-3 fw-bold">0</span>
                        <button class="btn btn-sm btn-white btn-circle shadow-sm" onclick="changeCount('cola', 1)">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button id="orderBtn" class="btn btn-success" onclick="submitOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand(); // –†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

    const cart = {
        rolls: 0,
        pizza: 0,
        cola: 0
    };

    function changeCount(item, delta) {
        cart[item] = Math.max(0, cart[item] + delta);
        document.getElementById(`count-${item}`).innerText = cart[item];
        updateOrderButton();
    }

    function updateOrderButton() {
        // –°—á–∏—Ç–∞–µ–º –æ–±—â—É—é —Å—É–º–º—É (–ø—Ä–∏–º–µ—Ä–Ω–æ)
        let totalItems = cart.rolls + cart.pizza + cart.cola;
        let totalPrice = (cart.rolls * 1200) + (cart.pizza * 650) + (cart.cola * 100);

        const btn = document.getElementById('orderBtn');
        if (totalItems > 0) {
            btn.style.display = 'block';
            btn.innerText = `–ó–∞–∫–∞–∑–∞—Ç—å –Ω–∞ ${totalPrice} ‚ÇΩ`;
        } else {
            btn.style.display = 'none';
        }
    }

    function submitOrder() {
        // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è JSON
        // –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ñ—Ä—ã, –∞ —Å—Ä–∞–∑—É —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –±–æ—Ç—É –±—ã–ª–æ –ª–µ–≥—á–µ
        const orderData = {
            shop_id: "1", // –Ω–∞ –±—É–¥—É—â–µ–µ
            items: cart
        };

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
        tg.sendData(JSON.stringify(orderData));
        
        // –í–ê–ñ–ù–û: –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
        tg.close();
    }
</script>

</body>
</html>